$(document).ready(function(){function e(){$.ajax({type:"ajax",url:"http://jrestudentcourse.online/student_single/get_student_info?pin=1234",dataType:"json ",success:function(e){var t,a="",s="",i="",l='<input type="checkbox" name="after_teaching" id="after_teaching"';for(t=0;t<e.length;t++)a+='<li class="list-group-item tooltip-bottom" title="Pin number"><i style="color:green;" class="fas fa-barcode fa-fw fa-lg"></i>'+e[t].pin+'</li><li class="list-group-item tooltip-right" title="Complete name"><i style="color:red;" class="fa fa-user-circle fa-fw fa-lg"></i>'+e[t].complete_name+'</li><li class="list-group-item tooltip-right" title="Nick name"><i style="color:rgb(70,0,90);" class="fa fa-user-circle fa-fw fa-lg"></i>'+e[t].nick_name+'</li><li class="list-group-item tooltip-bottom" title="Address"><i style="color:blue;" class="fa fa-home fa-fw fa-lg"></i>'+e[t].address+'</li><li class="list-group-item tooltip-bottom" title="Place of birth"><i style="color:grey;" class="fa fa-map-marker fa-fw fa-lg"></i>'+e[t].place_of_birth+'</li><li class="list-group-item tooltip-bottom" title="Date or birth"><i style="color:rgb(120,50,255);" class="fa fa-gift fa-fw fa-lg"></i>'+$.format.date(e[t].date_of_birth,"MMM,dd yyyy")+'</li><li class="list-group-item tooltip-bottom" title="Phone,click to call"><i style="color:navy;" class="fa fa-phone-square fa-fw fa-lg"></i><a style="text-decoration:none;" target="_blank" href="https://wa.me/'+e[t].phone+'">'+e[t].phone+'</a></li><li class="list-group-item tooltip-bottom" title="Study Program"><i style="color:rgb(162,255,20);" class="fa fa-list-ul fa-fw fa-lg"></i>'+e[t].program+'</li><li class="list-group-item tooltip-bottom" title="Program Duration"><i style="color:rgb(80,83,210);" class="fa fa-hourglass-end fa-fw fa-lg"></i>'+e[t].program_duration+' meetings</li><li class="list-group-item tooltip-bottom" title="Starting date"><i style="color:rgb(80,170,243);" class="fa fa-flag fa-fw fa-lg"></i>'+$.format.date(e[t].starting_date,"MMM,dd yyyy")+'</li><li class="list-group-item tooltip-bottom" title="Reason for studying"><i style="color:rgb(80,255,20);" class="fa fa-question-circle fa-fw fa-lg"></i>'+e[t].reason+'</li><li class="list-group-item tooltip-bottom" title="Target at the completion"><i style="color: rgb(190,110,27);" class="fa fa-crosshairs fa-fw fa-lg"></i>'+e[t].target+'</li><li class="list-group-item tooltip-bottom" title="Difficulties"><i style="color:rgb(255,0,255);" class="fa fa-thumbs-down fa-fw fa-lg"></i>'+e[t].difficulties+'</li><li class="list-group-item tooltip-bottom" title="Background"><i style="color:rgb(100,120,190);" class="fa fa-graduation-cap fa-fw fa-lg"></i>'+e[t].bground+'</li><li class="list-group-item tooltip-bottom" title="Self Introduction"><i style="color:rgb(70,210,155);" class="fa fa-info-circle fa-fw fa-lg"></i>'+e[t].self_introduction+'</li><li class="list-group-item tooltip-bottom" title="Weakness Points"><i style="color:rgb(255,20,60);" class="fa fa-exclamation-triangle fa-fw fa-lg"></i>'+e[t].weakness_point+'</li><li class="list-group-item tooltip-bottom" title="Action Plan"><i style="color:rgb(0,120,80);" class="fa fa-wrench fa-fw fa-lg"></i>'+e[t].action_plan+"</li>",i+='<a title="Edit" href="javascript:void(0);" class="btn btn-info student_info_edit tooltip-bottom" data-pin="'+e[t].pin+'" data-complete_name="'+e[t].complete_name+'" data-nick_name="'+e[t].nick_name+'" data-address="'+e[t].address+'" data-place_of_birth="'+e[t].place_of_birth+'" data-date_of_birth="'+$.format.date(e[t].date_of_birth,"yyyy-MM-dd")+'" data-phone="'+e[t].phone+'" data-program="'+e[t].program+'" data-program_duration="'+e[t].program_duration+'" data-starting_date="'+$.format.date(e[t].starting_date,"yyyy-MM-dd")+'" data-reason="'+e[t].reason+'" data-target="'+e[t].target+'" data-difficulties="'+e[t].difficulties+'" data-bground="'+e[t].bground+'" data-self_introduction="'+e[t].self_introduction+'" data-weakness_point="'+e[t].weakness_point+'" data-action_plan="'+e[t].action_plan+'"><i class="fas fa-user-edit fa-fw"></i></a>',s+="<small>Syllabus for </small>"+e[t].program,"yes"==e[t].after_teaching?l+="":l+="checked",l+='> <label for="after_teaching">Remove from after teaching list.</label>';$("#edit_student_span").html(i),$("#student_info").html(a),$("#syllabus_tab_header").html(s),$("#after_teaching_div").html(l)}})}function t(){$.ajax({type:"ajax",url:"http://jrestudentcourse.online/student_single/course_data?pin=1234",async:!1,dataType:"json",success:function(e){var t,a="";for(t=0;t<e.length;t++)a+="<tr><td>"+e[t].meeting+"</td><td>"+$.format.date(e[t].course_date,"E, MMM/dd/yy,H:mm ")+"</td><td>"+e[t].teacher+"</td><td>"+e[t].duration+"</td><td>"+e[t].material+"</td><td>"+e[t].evaluation+"</td><td>"+e[t].w+"</td><td>"+e[t].s+'</td><td style="text-align:right;"><a title="Edit" href="javascript:void(0);" class="btn btn-info btn-sm item_edit tooltip-right" data-meeting="'+e[t].meeting+'" data-course_date="'+e[t].course_date+'" data-teacher="'+e[t].teacher+'" data-duration="'+e[t].duration+'" data-material="'+e[t].material+'" data-evaluation="'+e[t].evaluation+'" data-w="'+e[t].w+'" data-s="'+e[t].s+'" data-test="'+e[t].test+'" data-test_number="'+e[t].test_number+'" data-test_name="'+e[t].test_name+'" data-of_test_number="'+e[t].of_test_number+'" data-of_test="'+e[t].of_test+'"><i class="fas fa-pencil-alt"></i></a> </td></tr>';$("#show_data").html(a)}})}function a(){$.ajax({type:"ajax",url:"http://jrestudentcourse.online/student_single/test_data?pin=1234",async:!1,dataType:"json",success:function(e){var t,a="";for(t=0;t<e.length;t++)a+="<tr><td>"+e[t].meeting+"</td><td>"+$.format.date(e[t].course_date,"E,MMM/dd/yy,H:mm ")+"</td><td>"+e[t].teacher+"</td><td>"+e[t].duration+"</td><td>"+e[t].material+"</td><td>"+e[t].evaluation+"</td>","Pre Spoken"===e[t].test_name||"Pre Written"===e[t].test_name?a+="<td>"+e[t].test_name+'</td><td style="text-align:right;">':a+="<td>"+e[t].test+'</td><td style="text-align:right;">',a+='<a target="_blank" href="test?pin=1234&meeting='+e[t].meeting+"&test="+e[t].test+'"><i class="fa fa-eye"></i></a> </td></tr>';$("#show_alltest").html(a)}})}function s(){$.ajax({type:"ajax",url:"http://jrestudentcourse.online/student_single/syllabus_data?pin=1234",async:!1,dataType:"json",success:function(e){var t,a="";for(t=0;t<e.length;t++)0==e[t].topic&&0==e[t].ind?a+='<div class="col-2 syll_section">'+e[t].section+'</div><div class="col-10 syll_section">'+e[t].indicator+"</div>":0!=e[t].topic&&0==e[t].ind?a+='<div class="col-2 syll_topic">'+e[t].section+"."+e[t].topic+'</div><div class="col-10 syll_topic">'+e[t].indicator+"</div>":1==e[t].status?a+='<div class="col-2 syll_ind">'+e[t].section+"."+e[t].topic+"."+e[t].ind+'</div><div class="col-8 syll_ind"><del>'+e[t].indicator+'</del></div><div class="col-2 syll_ind"><a href="student_single/uncheck_syllabus?pin=1234&id='+e[t].id+'" class="btn btn-default btn-sm"><i class="fa fa-check-square fa-2x"></i></a></div>':a+='<div class="col-2 syll_ind">'+e[t].section+"."+e[t].topic+"."+e[t].ind+'</div><div class="col-8 syll_ind">'+e[t].indicator+'</div><div class="col-2 syll_ind"><a href="student_single/check_syllabus?pin=1234&id='+e[t].id+'" class="btn btn-default btn-sm"><i class="fa fa-square fa-2x"></i></a></div>';$("#show_syllabus").html(a)}})}function i(s,i,l,n,o,d,r,c,_,m,u,f,g,p){$.ajax({type:"POST",url:"http://jrestudentcourse.online/student_single/save?pin="+s,dataType:"JSON",data:{meeting:i,course_date:l,teacher:n,duration:o,material:d,evaluation:r,w:c,s:_,test:m,test_number:u,test_name:f,of_test_number:g,of_test:p},success:function(s){$('[name="meeting"]').val(""),$('[name="teacher"]').val(""),$('[name="duration"]').val(""),$('[name="material"]').val(""),$('[name="evaluation"]').val(""),$('[name="w"]').val(""),$('[name="s"]').val(""),$('[name="test"]').val(""),$('[name="test_number"]').val(""),$('[name="test_name"]').val(""),$('[name="of_test_number"]').val(""),$('[name="of_test"]').val(""),$("#new_session_modal").modal("hide"),t(),a(),e()}})}function l(e,t){$.ajax({type:"POST",url:"http://jrestudentcourse.online/student_single/create_test');?>",dataType:"JSON",data:{pin:e,meeting:t},success:function(e){console.log("Test created")}})}if(e(),t(),s(),a(),$("#mydata").dataTable(),$("#my_tests").dataTable(),window.location.href.indexOf("#syll")>-1){var n=window.location.toString(),o=n.substring(0,n.indexOf("#"));$("#pills-course-tab").removeClass("active"),$("#pills-course").removeClass("active"),$("#pills-course").removeClass("show"),$("#pills-syllabus-tab").addClass("active"),$("#pills-syllabus").addClass("active"),$("#pills-syllabus").addClass("show"),window.history.replaceState({},document.title,o)}$("#student_info_div").on("click",".student_info_edit",function(){var e=$(this).data("pin"),t=$(this).data("complete_name"),a=$(this).data("nick_name"),s=$(this).data("address"),i=$(this).data("place_of_birth"),l=$(this).data("date_of_birth"),n=$(this).data("phone"),o=$(this).data("program"),d=$(this).data("program_duration"),r=$(this).data("starting_date"),c=$(this).data("reason"),_=$(this).data("target"),m=$(this).data("difficulties"),u=$(this).data("bground"),f=$(this).data("self_introduction"),g=$(this).data("weakness_point"),p=$(this).data("action_plan");$("#edit_student_modal").modal("show"),$('[name="pin_edit"]').val(e),$('[name="complete_name_edit"]').val(t),$('[name="nick_name_edit"]').val(a),$('[name="address_edit"]').val(s),$('[name="place_of_birth_edit"]').val(i),$('[name="date_of_birth_edit"]').val(l),$('[name="phone_edit"]').val(n),$('[name="program_edit"]').val(o),$('[name="program_duration_edit"]').val(d),$('[name="starting_date_edit"]').val(r),$('[name="reason_edit"]').val(c),$('[name="target_edit"]').val(_),$('[name="difficulties_edit"]').val(m),$('[name="bground_edit"]').val(u),$('[name="self_introduction_edit"]').val(f),$('[name="weakness_point_edit"]').val(g),$('[name="action_plan_edit"]').val(p)}),$("#btn_update_student").on("click",function(){var i=$("#pin_edit").val(),l=$("#complete_name_edit").val(),n=$("#nick_name_edit").val(),o=$("#address_edit").val(),d=$("#place_of_birth_edit").val(),r=$("#date_of_birth_edit").val(),c=$("#phone_edit").val(),_=$("#program_edit").val(),m=$("#program_duration_edit").val(),u=$("#starting_date_edit").val(),f=$("#reason_edit").val(),g=$("#target_edit").val(),p=$("#difficulties_edit").val(),b=$("#bground_edit").val(),v=$("#self_introduction_edit").val(),h=$("#weakness_point_edit").val(),k=$("#action_plan_edit").val();return""==i||""==l||""==o||""==r||""==c||""==_||""==m?($("#edit_student_feedback").addClass("alert alert-danger"),$("#edit_student_feedback").html("Please fill out all required fields"),""==l&&$("#complete_name_edit").css("background-color","#fbe2e6"),""==o&&$("#address_edit").css("background-color","#fbe2e6"),""==r&&$("#date_of_birth_edit").css("background-color","#fbe2e6"),""==c&&$("#phone_edit").css("background-color","#fbe2e6"),""==m&&$("#program_duration_edit").css("background-color","#fbe2e6")):isNaN(c)?($("#edit_student_feedback").addClass("alert alert-danger"),$("#edit_student_feedback").html("phone can only consist of number"),$("#phone_edit").css("background-color","#fbe2e6")):isNaN(m)?($("#edit_student_feedback").addClass("alert alert-danger"),$("#edit_student_feedback").html("Program duration only consist of number"),$("#program_duration_edit").css("background-color","#fbe2e6")):$.ajax({type:"POST",url:"http://jrestudentcourse.online/student/update",dataType:"JSON",data:{pin:i,complete_name:l,nick_name:n,address:o,place_of_birth:d,date_of_birth:r,phone:c,program:_,program_duration:m,starting_date:u,reason:f,target:g,difficulties:p,bground:b,self_introduction:v,weakness_point:h,action_plan:k},success:function(i){$('[name="pin_edit"]').val(""),$('[name="complete_name_edit"]').val(""),$('[name="nick_name_edit"]').val(""),$('[name="address_edit"]').val(""),$('[name="place_of_birth_edit"]').val(""),$('[name="date_of_birth_edit"]').val(""),$('[name="phone_edit"]').val(""),$('[name="program_edit"]').val(""),$('[name="program_duration_edit"]').val(""),$('[name="starting_date_edit"]').val(""),$('[name="reason_edit"]').val(""),$('[name="target_edit"]').val(""),$('[name="difficulties_edit"]').val(""),$('[name="bground_edit"]').val(""),$('[name="self_introduction_edit"]').val(""),$('[name="weakness_point_edit"]').val(""),$('[name="action_plan_edit"]').val(""),$("#edit_student_modal").modal("hide"),t(),a(),e(),s()}}),!1}),$("select, input, textarea").on("focus",function(){$(this).css("background-color","white"),$("#new_session_feedback, #edit_session_feedback, #edit_student_feedback").removeClass("alert alert-danger"),$("#new_session_feedback, #edit_session_feedback, #edit_student_feedback").html("")}),$('select[name="test_name"]').on("change",function(){var e=$(this).val();console.log(e),"Remedial"==e?$('select[name="of_test_number"], select[name="of_test"]').removeAttr("disabled"):($('select[name="of_test_number"], select[name="of_test"]').attr("disabled","disabled"),$('select[name="of_test_number"], select[name="of_test"]').val(""))}),$("#test").on("click",function(){$(this).is(":checked")?(console.log("test is on"),$("#course_div").removeClass("col"),$("#course_div").addClass("col-7"),$("#test_div").addClass("col-5"),$("#test_div").fadeIn("slow")):(console.log("test is off"),$("#course_div").removeClass("col-7"),$("#course_div").addClass("col"),$("#test_div").removeClass("col-5"),$("#test_div").fadeOut("fast"))}),$("#btn_save").on("click",function(){var e="1234",t=$("#meeting").val(),a=$("#course_date").val(),s=$("#teacher").val(),n=$("#duration").val(),o=$("#material").val(),d=$("#evaluation").val(),r=$("#w").val(),c=$("#s").val(),_="",m=$("#test_number").val(),u=$("#test_name").val(),f=$("#of_test_number").val(),g=$("#of_test").val();""==t||""==a||""==s||""==n||""==o||""==d?(console.log("fill out all required fields"),""==t&&$("#meeting").css("background-color","pink"),""==a&&$("#course_date").css("background-color","pink"),""==s&&$("#teacher").css("background-color","pink"),""==n&&$("#duration").css("background-color","pink"),""==o&&$("#material").css("background-color","pink"),""==d&&$("#evaluation").css("background-color","pink"),$("#new_session_feedback").addClass("alert alert-danger"),$("#new_session_feedback").html("Please fill out all required fields!")):isNaN(t)?(console.log("meeting not number"),$("#meeting").css("background-color","pink"),$("#new_session_feedback").addClass("alert alert-danger"),$("#new_session_feedback").html("Meeting field must only be numbers!")):isNaN(r)?console.log("writing not number"):isNaN(c)?console.log("speaking not number"):$.ajax({type:"post",url:"http://jrestudentcourse.online/student_single/meeting_availability",data:{pin:e,meeting:t},success:function(p){"true"==p?(console.log("meeting is already conducted"),$("#meeting").css("background-color","pink"),$("#new_session_feedback").addClass("alert alert-danger"),$("#new_session_feedback").html("Meeting with this number has already been conducted before!")):$("#test").is(":checked")?""==m?(console.log("test number empty"),$("#new_session_feedback").addClass("alert alert-danger"),$("#new_session_feedback").html("Please complete test details!"),$("#test_number").css("background-color","pink")):""==u?(console.log("test name empty"),$("#new_session_feedback").addClass("alert alert-danger"),$("#new_session_feedback").html("Please complete test details!"),$("#test_name").css("background-color","pink")):"Remedial"!=u?(_=m+" "+u,$.ajax({type:"post",url:"http://jrestudentcourse.online/student_single/test_availability'); ?>",data:{pin:e,test:_},success:function(p){"true"==p?(console.log(_+" is conducted"),$("#new_session_feedback").addClass("alert alert-danger"),$("#new_session_feedback").html("<em>"+_+"</em> has been conducted before!"),$("#test_number, #test_name").css("background-color","pink")):(console.log("test is available"),console.log("submit the form and the test"+_),i(e,t,a,s,n,o,d,r,c,_,m,u,f,g),l(e,t))}})):""==f?(console.log("of_test_number empty"),$("#new_session_feedback").addClass("alert alert-danger"),$("#new_session_feedback").html("Please complete the test details!"),$("#of_test_number").css("background-color","pink")):""==g?(console.log("of_test empty"),$("#new_session_feedback").addClass("alert alert-danger"),$("#new_session_feedback").html("Please complete the test details!"),$("#of_test").css("background-color","pink")):(_=m+" "+u+" of "+f+" "+g,$.ajax({type:"post",url:"http://jrestudentcourse.online/student_single/test_availability');?>",data:{pin:e,test:_},success:function(p){"true"==p?(console.log(_+" is conducted"),$("#new_session_feedback").addClass("alert alert-danger"),$("#new_session_feedback").html("<em>"+_+"</em> has been conducted before!"),$("#test_number, #test_name, #of_test_number, #of_test").css("background-color","pink")):(console.log(_+" is available"),console.log("submit the form and the remedial="+_),i(e,t,a,s,n,o,d,r,c,_,m,u,f,g),l(e,t))}})):(console.log("submit the form without the test"),i(e,t,a,s,n,o,d,r,c,_,m,u,f,g),function(e,t){$.ajax({type:"POST",url:"http://jrestudentcourse.online/student_single/after_teaching",dataType:"JSON",data:{pin:e,after_teaching:t},success:function(e){console.log("after after teaching set ="+t)}})}(e,"yes"))}})}),$("#new_session_btn").on("click",function(){var e=new Date,t=$.format.date(e,"yyyy-MM-ddTHH:mm");$("#new_session_modal").modal("show"),$('[name="course_date"]').val(t),$('[name="teacher"]').val("charlie")}),$("#show_data").on("click",".item_edit",function(){var e=$(this).data("meeting"),t=$.format.date($(this).data("course_date"),"yyyy-MM-ddTHH:mm"),a=$(this).data("teacher"),s=$(this).data("duration"),i=$(this).data("material"),l=$(this).data("evaluation"),n=$(this).data("w"),o=$(this).data("s"),d=$(this).data("test"),r=$(this).data("test_number"),c=$(this).data("test_name"),_=$(this).data("of_test_number"),m=$(this).data("of_test"),u="";$("#edit_session_modal").modal("show"),$('[name="meeting_edit"]').val(e),$('[name="course_date_edit"]').val(t),$('[name="teacher_edit"]').val(a),$('[name="duration_edit"]').val(s),$('[name="material_edit"]').val(i),$('[name="evaluation_edit"]').val(l),$('[name="w_edit"]').val(n),$('[name="s_edit"]').val(o),$('[name="test_number_edit"]').val(r),$('[name="test_name_edit"]').val(c),$('[name="of_test_number_edit"]').val(_),$('[name="of_test_edit"]').val(m),""==d?(u+='<input type="checkbox" disabled> Test',$("#edit_course_div").removeClass("col-7"),$("#edit_course_div").addClass("col"),$("#edit_test_div").css("display","none")):(u+='<input title="Test change is disabled" type="checkbox" disabled checked> Test',$("#edit_course_div").removeClass("col"),$("#edit_course_div").addClass("col-7"),$("#edit_test_div").addClass("col-5"),$("#edit_test_div").css("display","block")),$("#test_check_edit").html(u)}),$("#btn_update").on("click",function(){var s=$("#meeting_edit").val(),i=$("#course_date_edit").val(),l=$("#teacher_edit").val(),n=$("#duration_edit").val(),o=$("#material_edit").val(),d=$("#evaluation_edit").val(),r=$("#w_edit").val(),c=$("#s_edit").val(),_="",m=$("#test_number_edit").val(),u=$("#test_name_edit").val(),f=$("#of_test_number_edit").val(),g=$("#of_test_edit").val(),p="";return _=""!=u?"Remedial"!=u?m+" "+u:m+" "+u+" of "+f+" "+g:"",p=$("#after_teaching").is(":checked")?"no":"yes",""==i||""==l||""==n||""==o||""==d?(""==l&&$("#teacher_edit").css("background-color","pink"),""==i&&$("#course_date_edit").css("background-color","pink"),""==n&&$("#duration_edit").css("background-color","pink"),""==o&&$("#material_edit").css("background-color","pink"),""==d&&$("#evaluation_edit").css("background-color","pink"),$("#edit_session_feedback").addClass("alert alert-danger"),$("#edit_session_feedback").html("Please fill out all required fields")):isNaN(r)||isNaN(c)?($("#edit_session_feedback").addClass("alert alert-danger"),$("#edit_session_feedback").html("Assessment can only be number"),isNaN(r)&&$("#w_edit").css("background-color","pink"),isNaN(c)&&$("#s_edit").css("background-color","pink")):isNaN(n)?($("#edit_session_feedback").addClass("alert alert-danger"),$("#edit_session_feedback").html("Meeting duration can only be numbers"),$("#duration_edit").css("background-color","pink")):($.ajax({type:"POST",url:"http://jrestudentcourse.online/student_single/update?pin=1234",dataType:"JSON",data:{meeting:s,course_date:i,teacher:l,duration:n,material:o,evaluation:d,w:r,s:c,test:_,test_number:m,test_name:u,of_test_number:f,of_test:g},success:function(s){$('[name="meeting_edit"]').val(""),$('[name="course_date_edit"]').val(""),$('[name="teacher_edit"]').val(""),$('[name="duration_edit"]').val(""),$('[name="material_edit"]').val(""),$('[name="evaluation_edit"]').val(""),$('[name="w_edit"]').val(""),$('[name="s_edit"]').val(""),$('[name="test_edit"]').val(""),$("#edit_session_modal").modal("hide"),t(),a(),e()}}),$.ajax({type:"POST",url:"http://jrestudentcourse.online/student_single/after_teaching",dataType:"JSON",data:{pin:"1234",after_teaching:p},success:function(e){console.log("after teaching set = "+p)}})),!1})});